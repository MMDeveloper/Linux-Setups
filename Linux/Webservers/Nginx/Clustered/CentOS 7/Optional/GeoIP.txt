### If you want to filter requests based on geographical location, you need to have the GeoIP module compiled into Nginx. To check for this, run:

nginx -V

### and search for "--with-http_geoip_module"
### You can also run this and see if you get anything back at all.
nginx -V | grep -i geoip


### If you have GeoIP compiled into Nginx, integration is easy.
cd /var/www/internal/conf/nginx/
wget http://geolite.maxmind.com/download/geoip/database/GeoLiteCountry/GeoIP.dat.gz
gunzip GeoIP.dat.gz

### Now we need to edit the main nginx config file
vim /var/www/internal/conf/nginx/nginx.conf

### add this line at the top of the http{} block before anything else
geoip_country /var/www/internal/conf/nginx/GeoIP.dat;

### Done.. Now, if you wanted to disallow all countries except USA, you'd add this just after the previous line
### You can look up geoip country codes at http://dev.maxmind.com/geoip/legacy/codes/iso3166/
map $geoip_country_code $allowed_country {
    default no;
    US yes;
}

### In your vhost definitions, any site you wanted to apply this restriction
if ($allowed_country = no) {
    return 403;
}